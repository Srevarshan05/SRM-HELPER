<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRM GPT - AI Study Assistant | SRM Verse</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* CSS Variables */
        :root {
            --white: #ffffff;
            --black: #0a0a0a;
            --dark-gray: #2a2a2a;
            --light-gray: #f8fafc;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-cyan: #06b6d4;
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --hero-gradient: linear-gradient(135deg, #1e3a8a 0%, #3730a3 25%, #7c3aed 50%, #c026d3 75%, #e11d48 100%);
            --card-gradient: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%);
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);
            --glow-blue: 0 0 20px rgba(59, 130, 246, 0.5);
            --glow-purple: 0 0 20px rgba(139, 92, 246, 0.5);
            --glow-pink: 0 0 20px rgba(236, 72, 153, 0.5);
            --glow-cyan: 0 0 20px rgba(6, 182, 212, 0.5);
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f0f23;
            color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at top, #1e1b4b 0%, #0f0f23 50%, #000000 100%);
        }

        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6, #ec4899);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            opacity: 0.7;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .particle:nth-child(1) { width: 4px; height: 4px; left: 10%; animation-delay: 0s; }
        .particle:nth-child(2) { width: 6px; height: 6px; left: 20%; animation-delay: 1s; }
        .particle:nth-child(3) { width: 3px; height: 3px; left: 30%; animation-delay: 2s; }
        .particle:nth-child(4) { width: 5px; height: 5px; left: 40%; animation-delay: 3s; }
        .particle:nth-child(5) { width: 4px; height: 4px; left: 50%; animation-delay: 4s; }
        .particle:nth-child(6) { width: 6px; height: 6px; left: 60%; animation-delay: 5s; }
        .particle:nth-child(7) { width: 3px; height: 3px; left: 70%; animation-delay: 0.5s; }
        .particle:nth-child(8) { width: 5px; height: 5px; left: 80%; animation-delay: 1.5s; }
        .particle:nth-child(9) { width: 4px; height: 4px; left: 90%; animation-delay: 2.5s; }

        /* Glowing orbs */
        .glow-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.3;
            animation: float 8s ease-in-out infinite;
        }

        .glow-orb-1 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, #3b82f6, transparent);
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .glow-orb-2 {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, #8b5cf6, transparent);
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .glow-orb-3 {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #ec4899, transparent);
            bottom: 30%;
            left: 20%;
            animation-delay: 4s;
        }

        /* Navigation */
        .navbar {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 80px;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--white);
            text-decoration: none;
        }

        .nav-brand i {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover {
            color: var(--white);
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .nav-link.active {
            color: var(--white);
            background: rgba(255, 255, 255, 0.15);
        }

        /* Main Content */
        .main-content {
            padding: 4rem 0;
            position: relative;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* AI Assistant specific styles */
        .chat-wrapper {
            display: flex;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            gap: 2rem;
        }

        .chat-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 140px);
            overflow: hidden;
        }

        .chat-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            background: rgba(255, 255, 255, 0.02);
        }

        .chat-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .chat-header h1 i {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .chat-header p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin: 0.5rem 0 0;
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 2rem;
            scroll-behavior: smooth;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            display: flex;
            gap: 1rem;
            align-self: flex-start;
            width: fit-content;
            max-width: 85%;
        }

        .message.user-message {
            align-self: flex-end;
            flex-direction: row-reverse;
            max-width: 70%;
        }

        .message-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 1rem 1.25rem;
            font-size: 1rem;
            line-height: 1.6;
            position: relative;
            color: var(--white);
            transition: all 0.3s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            box-sizing: border-box;
            width: fit-content;
            min-width: 100px;
            max-width: 100%;
        }

        .message.user-message .message-content {
            background: var(--primary-gradient);
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Enhanced message formatting styles with overflow control */
        .message-text {
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            max-width: 100%;
            overflow: hidden;
        }

        .message-text h1, .message-text h2, .message-text h3, .message-text h4 {
            color: #4fc3f7;
            margin: 1rem 0 0.5rem 0;
            font-weight: 600;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text h1 { font-size: 1.3rem; }
        .message-text h2 { font-size: 1.2rem; }
        .message-text h3 { font-size: 1.1rem; }
        .message-text h4 { font-size: 1rem; }

        .message-text p {
            margin: 0.75rem 0;
            line-height: 1.7;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text ul, .message-text ol {
            margin: 0.75rem 0;
            padding-left: 1.5rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text li {
            margin: 0.4rem 0;
            line-height: 1.6;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text strong {
            color: #81c784;
            font-weight: 600;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text em {
            color: #ffb74d;
            font-style: italic;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text code {
            background: rgba(0, 0, 0, 0.3);
            color: #ff9800;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            word-break: break-all;
            white-space: pre-wrap;
            max-width: 100%;
            display: inline-block;
            box-sizing: border-box;
        }

        .message-text pre {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            position: relative;
            max-width: 100%;
            box-sizing: border-box;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .message-text pre code {
            background: none;
            color: #e0e0e0;
            padding: 0;
            font-size: 0.9rem;
            line-height: 1.4;
            white-space: pre-wrap;
            word-break: break-all;
            max-width: 100%;
            display: block;
            overflow-wrap: break-word;
        }

        .message-text blockquote {
            border-left: 3px solid #4fc3f7;
            background: rgba(79, 195, 247, 0.1);
            margin: 1rem 0;
            padding: 0.75rem 1rem;
            border-radius: 0 8px 8px 0;
            font-style: italic;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
        }

        .message-text .math-expression {
            background: rgba(156, 39, 176, 0.1);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 6px;
            padding: 0.5rem;
            margin: 0.5rem 0;
            font-family: 'Times New Roman', serif;
            text-align: center;
            color: #ce93d8;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: auto;
        }

        .message-text .step-by-step {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4caf50;
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
        }

        .message-text .step-by-step .step {
            margin: 0.75rem 0;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text .step-by-step .step:last-child {
            border-bottom: none;
        }

        .message-text .step-number {
            color: #4caf50;
            font-weight: 600;
            margin-right: 0.5rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text .highlight {
            background: rgba(255, 235, 59, 0.2);
            color: #fff59d;
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .message-text .warning {
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid rgba(255, 152, 0, 0.3);
            border-radius: 6px;
            padding: 0.75rem;
            margin: 1rem 0;
            color: #ffcc02;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
        }

        .message-text .info {
            background: rgba(33, 150, 243, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.3);
            border-radius: 6px;
            padding: 0.75rem;
            margin: 1rem 0;
            color: #64b5f6;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
        }

        .message-text table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            overflow: hidden;
            max-width: 100%;
            box-sizing: border-box;
            table-layout: fixed;
        }

        .message-text th, .message-text td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        .message-text th {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            font-weight: 600;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: rgba(255, 255, 255, 0.7);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
        }

        .message-time {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            align-self: flex-end;
            margin-top: 0.25rem;
        }

        .thinking-indicator {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .thinking-spinner {
            display: flex;
            gap: 8px;
        }

        .thinking-dot {
            width: 12px;
            height: 12px;
            background: var(--primary-gradient);
            border-radius: 50%;
            animation: thinking 1.2s ease-in-out infinite;
        }

        .thinking-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .thinking-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes thinking {
            0%, 100% { transform: scale(0.5); opacity: 0.3; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        .chat-input-container {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem 2rem;
            background: rgba(255, 255, 255, 0.02);
        }

        .chat-input-wrapper {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 0.75rem;
        }

        .chat-input-wrapper textarea {
            flex-grow: 1;
            resize: none;
            border: none;
            padding: 0.75rem;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            background: transparent;
            color: var(--white);
            min-height: 40px;
            max-height: 120px;
            line-height: 1.5;
        }

        .chat-input-wrapper textarea:focus {
            outline: none;
        }

        .chat-input-wrapper textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .send-btn {
            background: var(--primary-gradient);
            border: none;
            color: var(--white);
            border-radius: 12px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-blue);
        }

        .send-btn:disabled {
            background: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
        }

        .input-suggestions {
            margin-top: 1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            justify-content: center;
        }

        .suggestion-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            color: var(--white);
            transition: all 0.3s ease;
        }

        .suggestion-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .hamburger {
            display: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            padding: 0.5rem;
        }

        /* Mobile App-like Responsive Design */
        @media (max-width: 768px) {
            /* Navigation - Compact Mobile Style */
            .nav-container {
                flex-direction: column;
                height: auto;
                padding: 0.75rem;
            }

            .nav-brand {
                margin-bottom: 0.75rem;
                font-size: 1.25rem;
            }

            .nav-menu {
                flex-wrap: wrap;
                gap: 0.25rem;
                justify-content: center;
            }

            .nav-link {
                padding: 0.5rem;
                border-radius: 8px;
                font-size: 0.8rem;
            }

            .nav-link span {
                display: none;
            }
            
            /* Mobile App Chat Layout */
            .main-content { 
                padding: 0.5rem 0.25rem; 
                min-height: calc(100vh - 120px);
            }
            
            .chat-wrapper { 
                gap: 0; 
                max-width: 100%;
            }
            
            .chat-container { 
                height: calc(100vh - 140px); 
                border-radius: 16px;
                margin: 0 0.25rem;
                max-width: 100%;
            }
            
            /* Compact Header */
            .chat-header { 
                padding: 1rem 1rem; 
                text-align: center;
                background: rgba(255, 255, 255, 0.03);
            }
            
            .chat-header h1 { 
                font-size: 1.2rem; 
                flex-direction: column;
                gap: 0.5rem;
                line-height: 1.3;
                margin: 0;
            }
            
            .chat-header p { 
                font-size: 0.8rem; 
                margin-top: 0.5rem;
                line-height: 1.4;
                opacity: 0.8;
            }
            
            /* Mobile Messages Area */
            .chat-messages { 
                padding: 1rem 0.75rem; 
                gap: 0.75rem;
                flex: 1;
                overflow-y: auto;
            }
            
            .message { 
                max-width: 90%; 
                gap: 0.5rem;
                width: fit-content;
            }

            .message.user-message {
                max-width: 75%;
            }
            
            .message-content { 
                padding: 0.75rem 1rem; 
                font-size: 0.9rem; 
                border-radius: 16px;
                line-height: 1.5;
                word-wrap: break-word;
                overflow-wrap: break-word;
                width: fit-content;
                min-width: 80px;
            }
            
            .message-time { 
                font-size: 0.7rem; 
                margin-top: 0.5rem;
                opacity: 0.7;
            }
            
            /* Mobile Message Formatting */
            .message-text h1 { font-size: 1.1rem; margin: 0.75rem 0 0.4rem 0; }
            .message-text h2 { font-size: 1rem; margin: 0.75rem 0 0.4rem 0; }
            .message-text h3 { font-size: 0.95rem; margin: 0.75rem 0 0.4rem 0; }
            .message-text h4 { font-size: 0.9rem; margin: 0.75rem 0 0.4rem 0; }
            .message-text p { margin: 0.5rem 0; line-height: 1.6; }
            .message-text ul, .message-text ol { margin: 0.5rem 0; padding-left: 1.2rem; }
            .message-text li { margin: 0.3rem 0; }
            .message-text pre { 
                margin: 0.75rem 0; 
                padding: 0.75rem; 
                border-radius: 8px;
                overflow-x: auto;
                font-size: 0.8rem;
            }
            .message-text code { 
                font-size: 0.8rem; 
                padding: 0.15rem 0.3rem;
            }
            .message-text blockquote { 
                margin: 0.75rem 0; 
                padding: 0.5rem 0.75rem; 
                font-size: 0.85rem;
            }
            
            /* Mobile Input Area */
            .chat-input-container { 
                padding: 1rem 0.75rem; 
                background: rgba(255, 255, 255, 0.03);
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .chat-input-wrapper { 
                padding: 0.5rem; 
                border-radius: 16px;
                gap: 0.5rem;
                background: rgba(255, 255, 255, 0.1);
            }
            
            .chat-input-wrapper textarea { 
                padding: 0.75rem; 
                font-size: 0.9rem;
                min-height: 40px;
                line-height: 1.4;
                background: transparent;
                border: none;
                resize: none;
            }
            
            .send-btn { 
                width: 36px; 
                height: 36px; 
                font-size: 0.9rem; 
                border-radius: 10px;
                flex-shrink: 0;
            }
            
            /* Mobile Suggestions */
            .input-suggestions { 
                margin-top: 0.75rem; 
                gap: 0.5rem; 
                justify-content: flex-start;
                flex-wrap: wrap;
                display: grid;
                grid-template-columns: repeat(2, 1fr);
            }
            
            .suggestion-btn { 
                padding: 0.5rem 0.75rem; 
                font-size: 0.8rem; 
                border-radius: 12px;
                white-space: nowrap;
                text-align: center;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            /* Mobile Copy Button */
            .copy-btn { 
                top: 0.4rem; 
                right: 0.4rem; 
                padding: 0.2rem 0.4rem; 
                font-size: 0.7rem;
                border-radius: 4px;
            }
            
            /* Mobile Thinking Indicator */
            .thinking-indicator { 
                padding: 0.75rem 1rem; 
                justify-content: flex-start;
            }
            .thinking-dot { 
                width: 10px; 
                height: 10px; 
            }
        }

        @media (max-width: 480px) {
            /* Extra Small Mobile Optimization */
            .main-content { 
                padding: 0.25rem; 
            }
            
            .chat-container { 
                height: calc(100vh - 130px); 
                margin: 0;
                border-radius: 12px;
            }
            
            /* Ultra-Compact Header */
            .chat-header { 
                padding: 0.75rem; 
            }
            
            .chat-header h1 { 
                font-size: 1.1rem; 
                gap: 0.4rem;
            }
            
            .chat-header p { 
                font-size: 0.75rem; 
                margin-top: 0.4rem;
            }
            
            /* Ultra-Compact Messages */
            .chat-messages { 
                padding: 0.75rem 0.5rem; 
                gap: 0.6rem;
            }
            
            .message { 
                max-width: 95%; 
                gap: 0.4rem;
                width: fit-content;
            }

            .message.user-message {
                max-width: 80%;
            }
            
            .message-content { 
                padding: 0.6rem 0.8rem; 
                font-size: 0.85rem; 
                border-radius: 14px;
                width: fit-content;
                min-width: 60px;
            }
            
            .message-time { 
                font-size: 0.65rem; 
                margin-top: 0.4rem;
            }
            
            /* Ultra-Compact Message Formatting */
            .message-text h1 { font-size: 1rem; margin: 0.6rem 0 0.3rem 0; }
            .message-text h2 { font-size: 0.95rem; margin: 0.6rem 0 0.3rem 0; }
            .message-text h3 { font-size: 0.9rem; margin: 0.6rem 0 0.3rem 0; }
            .message-text h4 { font-size: 0.85rem; margin: 0.6rem 0 0.3rem 0; }
            .message-text p { margin: 0.4rem 0; font-size: 0.85rem; }
            .message-text ul, .message-text ol { padding-left: 1rem; }
            .message-text pre { 
                margin: 0.6rem 0; 
                padding: 0.6rem; 
                font-size: 0.75rem;
            }
            .message-text code { font-size: 0.75rem; }
            
            /* Ultra-Compact Input */
            .chat-input-container { 
                padding: 0.75rem 0.5rem; 
            }
            
            .chat-input-wrapper { 
                padding: 0.4rem; 
                border-radius: 14px;
            }
            
            .chat-input-wrapper textarea { 
                padding: 0.6rem; 
                font-size: 0.85rem;
                min-height: 36px;
            }
            
            .send-btn { 
                width: 32px; 
                height: 32px; 
                font-size: 0.8rem; 
                border-radius: 8px;
            }
            
            /* Ultra-Compact Suggestions */
            .input-suggestions { 
                margin-top: 0.6rem; 
                gap: 0.4rem; 
                grid-template-columns: 1fr;
            }
            
            .suggestion-btn { 
                padding: 0.4rem 0.6rem; 
                font-size: 0.75rem; 
                border-radius: 10px;
            }
            
            /* Ultra-Compact Copy Button */
            .copy-btn { 
                top: 0.3rem; 
                right: 0.3rem; 
                padding: 0.15rem 0.3rem; 
                font-size: 0.65rem;
                border-radius: 3px;
            }
        }

        @media (max-width: 360px) {
            /* Ultra Small Screens */
            .chat-header h1 { 
                font-size: 1rem; 
                text-align: center;
            }
            
            .chat-header p { 
                font-size: 0.7rem; 
            }
            
            .message-content { 
                padding: 0.5rem 0.7rem; 
                font-size: 0.8rem;
                width: fit-content;
                min-width: 50px;
            }
            
            .chat-input-wrapper textarea { 
                font-size: 0.8rem;
                padding: 0.5rem;
            }
            
            .suggestion-btn { 
                padding: 0.35rem 0.5rem; 
                font-size: 0.7rem; 
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg">
        <div class="particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
        <div class="glow-orb glow-orb-1"></div>
        <div class="glow-orb glow-orb-2"></div>
        <div class="glow-orb glow-orb-3"></div>
    </div>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-graduation-cap"></i>
                <span>SRM Verse</span>
            </div>
            <i class="fas fa-bars hamburger" id="hamburger"></i>
            <div class="nav-menu" id="navMenu">
                <a href="dashboard.html" class="nav-link" aria-label="Dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="materials-simple.html" class="nav-link" aria-label="Materials">
                    <i class="fas fa-book"></i>
                    <span>Materials</span>
                </a>
                <a href="gpa-simple.html" class="nav-link" aria-label="GPA Calculator">
                    <i class="fas fa-calculator"></i>
                    <span>GPA</span>
                </a>
                <a href="attendance-calculator.html" class="nav-link" aria-label="Attendance Tracker">
                    <i class="fas fa-calendar-check"></i>
                    <span>Attendance</span>
                </a>
                <a href="pomodoro-timer.html" class="nav-link" aria-label="Pomodoro Timer">
                    <i class="fas fa-clock"></i>
                    <span>Timer</span>
                </a>
                <a href="ai-assistant.html" class="nav-link active" aria-label="HELPER GPT">
                    <i class="fas fa-robot"></i>
                    <span>SRM GPT</span>
                </a>
            </div>
        </div>
    </nav>

    <main class="main-content" role="main" aria-label="HELPER GPT">
        <div class="chat-wrapper">
            <section class="chat-container" aria-live="polite" aria-atomic="false" aria-relevant="additions">
                <div class="chat-header">
                    <h1><i class="fas fa-robot"></i> SRM GPT - AI Study Assistant</h1>
                    <p>Powered by Llama 3.3 70B Versatile. Ask me anything about your studies!</p>
                </div>
                <div class="chat-messages" id="chatMessages" role="log" aria-live="polite" aria-relevant="additions">
                    <div class="message bot-message" role="article" aria-label="Assistant message">
                        <div class="message-content">
                            <div class="message-text">
                                Hello! I'm SRM GPT, your personal AI tutor. I can assist with math and science problems, explain complex concepts, summarize topics, help with homework and projects, write code, and answer any academic questions you have. What would you like to learn about today?
                            </div>
                            <div class="message-time">Just now</div>
                        </div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea
                            id="chatInput"
                            placeholder="Ask SRM GPT anything about your studies..."
                            rows="1"
                            onkeydown="handleKeyDown(event)"
                            aria-label="Chat input"
                            autocomplete="off"
                            spellcheck="true"
                        ></textarea>
                        <button class="send-btn" id="sendBtn" aria-label="Send message" title="Send message" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="input-suggestions" role="list" aria-label="Suggested questions">
                        <button class="suggestion-btn" role="listitem" onclick="insertSuggestion('Explain a complex concept')">
                            Explain concept
                        </button>
                        <button class="suggestion-btn" role="listitem" onclick="insertSuggestion('Help me solve this math problem')">
                            Solve problem
                        </button>
                        <button class="suggestion-btn" role="listitem" onclick="insertSuggestion('Write code for this task')">
                            Write code
                        </button>
                        <button class="suggestion-btn" role="listitem" onclick="insertSuggestion('Help with my homework')">
                            Homework help
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
    // API configuration - now calling your own Vercel serverless function
    const LOCAL_API_URL = '/api/chat'; // This is the path to your new serverless function (api/chat.js)
    // const MODEL = 'llama-3.3-70b-versatile'; // This model variable is no longer strictly needed on the frontend,
                                             // as your serverless function will specify the model.

    document.getElementById('hamburger').addEventListener('click', () => {
        const navMenu = document.getElementById('navMenu');
        navMenu.classList.toggle('active');
    });

    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
            document.getElementById('navMenu').classList.remove('active');
        });
    });

    const chatMessages = document.getElementById('chatMessages');
    const sendBtn = document.getElementById('sendBtn');
    const chatInput = document.getElementById('chatInput'); // Define chatInput globally or pass it

    async function sendMessage() {
        const messageText = chatInput.value.trim();
        if (!messageText) return;

        // Add user message to chat
        const userMessage = document.createElement('div');
        userMessage.className = 'message user-message';
        userMessage.innerHTML = `
            <div class="message-content">
                <div class="message-text">${messageText}</div>
                <div class="message-time">${new Date().toLocaleTimeString()}</div>
            </div>
        `;
        chatMessages.appendChild(userMessage);

        // Add thinking indicator
        const thinkingIndicator = document.createElement('div');
        thinkingIndicator.className = 'thinking-indicator';
        thinkingIndicator.innerHTML = `
            <div class="thinking-spinner">
                <span class="thinking-dot"></span>
                <span class="thinking-dot"></span>
                <span class="thinking-dot"></span>
            </div>
        `;
        chatMessages.appendChild(thinkingIndicator);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Disable send button
        sendBtn.disabled = true;
        sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

        try {
            // Modified fetch call to point to your Vercel serverless function
            const response = await fetch(LOCAL_API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: messageText // Only send the user's message, the serverless function handles the rest
                })
            });

            const data = await response.json(); // Parse the JSON response from your serverless function
            
            if (response.status !== 200) {
                // If your serverless function returned an error status (e.g., 400, 500)
                throw new Error(data.error || 'Unknown error from serverless function');
            }

            const reply = data.reply; // Your serverless function sends the AI's response in a 'reply' field

            // Remove thinking indicator
            thinkingIndicator.remove();

            // Add bot response with formatted content
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot-message';
            botMessage.innerHTML = `
                <div class="message-content">
                    <div class="message-text">${formatResponse(reply)}</div>
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
            chatMessages.appendChild(botMessage);
            
            // Add copy buttons to code blocks
            addCopyButtons(botMessage);
            
            chatMessages.scrollTop = chatMessages.scrollHeight;

        } catch (error) {
            console.error('Generation error:', error);
            thinkingIndicator.remove();
            
            const botMessage = document.createElement('div');
            botMessage.className = 'message bot-message';
            botMessage.innerHTML = `
                <div class="message-content">
                    <div class="message-text">Sorry, I encountered an error while processing your request. Please try again.</div>
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
            chatMessages.appendChild(botMessage);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Re-enable send button
        sendBtn.disabled = false;
        sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i>';
        chatInput.value = '';
    }

    async function handleKeyDown(event) {
        if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            sendMessage();
        }
    }

    function insertSuggestion(text) {
        const chatInput = document.getElementById('chatInput');
        chatInput.value = text;
        chatInput.focus();
    }

    // Auto-resize textarea
    // The chatInput variable is now defined at a higher scope
    chatInput.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
    });

    // Format response text with enhanced styling
    function formatResponse(text) {
        // Escape HTML first
        text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        
        // Format code blocks (```code```)
        text = text.replace(/```(\w+)?\n?([\s\S]*?)```/g, (match, lang, code) => {
            return `<pre><code>${code.trim()}</code></pre>`;
        });
        
        // Format inline code (`code`)
        text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
        
        // Format bold text (**text**)
        text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        
        // Format italic text (*text*)
        text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
        
        // Format headers (## Header) - order matters for replacement
        text = text.replace(/^### (.*$)/gm, '<h3>$1</h3>');
        text = text.replace(/^## (.*$)/gm, '<h2>$1</h2>');
        text = text.replace(/^# (.*$)/gm, '<h1>$1</h1>');
        
        // Format step-by-step solutions
        if (text.includes('Step ') || text.includes('step ')) {
            text = text.replace(/(Step \d+:|step \d+:)/gi, '<span class="step-number">$1</span>');
        }
        
        // Format mathematical expressions (wrap in math class)
        // Assuming your backend will send actual LaTeX if needed, otherwise this is a simple visual wrapper
        text = text.replace(/(\$.*?\$)/g, '<span class="math-expression">$1</span>');
        
        // Format lists (before paragraphs to avoid double wrapping)
        const listItemsRegex = /^(?:[*-]|\d+\.)\s+(.*(?:[\r\n](?![*-]|\d+\.)\s+.*)*)/gm;
        const tempLists = [];
        text = text.replace(listItemsRegex, (match, content) => {
            const marker = match.match(/^(?:[*-]|\d+\.)/)[0];
            const type = marker.includes('*') || marker.includes('-') ? 'ul' : 'ol';
            const listItem = `<li>${content.trim()}</li>`;
            
            if (tempLists.length > 0 && tempLists[tempLists.length - 1].type === type) {
                tempLists[tempLists.length - 1].items.push(listItem);
            } else {
                tempLists.push({ type, items: [listItem] });
            }
            return 'TEMP_LIST_PLACEHOLDER_' + (tempLists.length - 1);
        });

        tempLists.forEach((list, index) => {
            text = text.replace('TEMP_LIST_PLACEHOLDER_' + index, `<${list.type}>${list.items.join('')}</${list.type}>`);
        });
        
        // Format paragraphs (after lists and other block elements)
        text = text.split('\n\n').map(paragraph => {
            if (paragraph.trim() === '' || paragraph.startsWith('<h') || paragraph.startsWith('<pre') || paragraph.startsWith('<ul') || paragraph.startsWith('<ol') || paragraph.startsWith('<blockquote') || paragraph.startsWith('<div')) {
                return paragraph; // Don't wrap already formatted blocks or empty lines
            }
            // Handle single newlines as <br> within a paragraph, double newlines create new paragraphs
            return `<p>${paragraph.replace(/\n/g, '<br>')}</p>`;
        }).join('');
        
        // Clean up empty paragraphs
        text = text.replace(/<p><\/p>/g, '').replace(/<p>\s*<\/p>/g, '');
        
        // Format blockquotes (> text)
        text = text.replace(/^&gt;\s+(.*)$/gm, '<blockquote>$1</blockquote>');
        
        // Highlight important terms (this should be after initial escaping, but before final HTML parsing)
        text = text.replace(/\b(important|note|warning|remember|key point)\b/gi, '<span class="highlight">$1</span>');
        
        return text;
    }

    // Add copy buttons to code blocks
    function addCopyButtons(messageElement) {
        const codeBlocks = messageElement.querySelectorAll('pre');
        codeBlocks.forEach(block => {
            const copyBtn = document.createElement('button');
            copyBtn.className = 'copy-btn';
            copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
            copyBtn.title = 'Copy code';
            copyBtn.onclick = () => {
                const code = block.querySelector('code').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    copyBtn.innerHTML = '<i class="fas fa-check"></i>';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
                    }, 2000);
                });
            };
            block.appendChild(copyBtn);
        });
    }
</script>

    
</body>
</html>